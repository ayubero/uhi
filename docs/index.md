# Urban Heat Island Detector

## Getting stated

This project uses poetry to manage its dependencies, run `poetry install --no-root` to install all dependencies mentioned in pyproject.toml. After that, execute `poetry shell` to activate the virtual environment.

## Prerequisites

### Sentinel imagery download

In `src/download/sentinel.py`, the constant `product_url` is defined based on [this documentation](https://documentation.dataspace.copernicus.eu/APIs/OData.html) to locate any product in the Copernicus OData API. Adjust this constant according to your search requirements.

Ensure you have a `.env` file in the root folder to store the **ACCESS_TOKEN** and **SECRET_ACCESS_KEY**. These credentials can be generated by following [this guide](https://documentation.dataspace.copernicus.eu/APIs/S3.html), allowing you to download images from the Copernicus S3 endpoint.

### Study area

In order to detect an UHI, define a study area for the desired city using a GIS tool or similar, and export it as a shapefile with the following path: `data/[city-name]/shapefiles/study_area.shp`.

Replace `[city-name]` by the real name of the studied city. All the data related to that city will be stored in the folder `data/[city-name]`.

### Configuration

All configuration parameters are specified in config.yaml, including settings for the logging system, data download, processing, and quality control. It also contains parameters for CNN training and prediction, as well as interpolation.

## Running

There are two methods available for predicting the UHI: using a CNN or applying kriging.

Run `python3 main.py` in your poetry environment, select the city, the method (CNN or Kriging) and wait until the prediction raster is generated in the folder `data/[city-name]/results`.